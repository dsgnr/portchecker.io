# Default values for portchecker.io.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
hostname: portchecker.io
api_hostname: api.portchecker.io

## Credentials
rabbitmq_user: portchecker
rabbitmq_pass: my_example_password
rabbitmq_vhost: celery
rabbitmq_cookie: my_example_cookie

## Default variables for App, Celery and Beat Statefulsets
app_vars: &app_vars
  - env_variable: RABBITMQ_DEFAULT_USER
    secret_map: rabbitmq-secrets
    secret_key: rabbitmq_user
  - env_variable: RABBITMQ_DEFAULT_PASS
    secret_map: rabbitmq-secrets
    secret_key: rabbitmq_pass
  - env_variable: RABBITMQ_DEFAULT_VHOST
    secret_map: rabbitmq-secrets
    secret_key: rabbitmq_vhost
  - env_variable: RABBITMQ_ERLANG_COOKIE
    secret_map: rabbitmq-secrets
    secret_key: rabbitmq_cookie

## Service variables
service:
  webui:
    name: webui
    replicas: 4
    image: dsgnr/portcheckerio-ui:latest
    port: 8080
  api:
    name: api
    replicas: 4
    image: dsgnr/portcheckerio:latest
    port: 3000
    secrets:
      *app_vars
  celery:
    name: celery
    replicas: 4
    image: dsgnr/portcheckerio:latest
    secrets:
      *app_vars
  rabbitmq:
    name: rabbitmq
    replicas: 3
    image: rabbitmq:3.8-management
    secrets:
      *app_vars
  redis:
    name: redis
    replicas: 1
    image: redis
    port: 6379
